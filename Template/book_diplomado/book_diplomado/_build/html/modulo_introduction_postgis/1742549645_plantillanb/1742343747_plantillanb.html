
<!DOCTYPE html>


<html lang="en" data-content_root="../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Bases de datos espaciales: PostGIS y su integración con Python &#8212; Módulo 1 Introducción a la Inteligencia Artificial aplicada a los Sistemas de Información Geográfica</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css?v=be8a1c11" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js?v=4a39c7ea"></script>
    <script async="async" kind="hypothesis" src="https://hypothes.is/embed.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'modulo_introduction_postgis/1742549645_plantillanb/1742343747_plantillanb';</script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Bases de datos espaciales: PostGIS y su integración con Python (Ejemplo de uso)" href="../../modulo_example_postgis/1742549645_plantillanb/1742343747_plantillanb.html" />
    <link rel="prev" title="Introducción a las principales librerías: NumPy, Pandas, rasterio, GDAL y geopandas" href="../../modulo_0/1739882476_plantillanb/1739882476_plantillanb.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../../intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../_static/IGAC.png" class="logo__image only-light" alt="Módulo 1 Introducción a la Inteligencia Artificial aplicada a los Sistemas de Información Geográfica - Home"/>
    <script>document.write(`<img src="../../_static/IGAC.png" class="logo__image only-dark" alt="Módulo 1 Introducción a la Inteligencia Artificial aplicada a los Sistemas de Información Geográfica - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../intro.html">
                    ¡Bienvenida al Módulo 1!
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">modulo_0</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../modulo_0/1740009537_plantillamd/1740009537_plantillamd.html">Introducción a las principales librerías: NumPy, Pandas, rasterio, GDAL y geopandas</a></li>

<li class="toctree-l1"><a class="reference internal" href="../../modulo_0/1739882476_plantillanb/1739882476_plantillanb.html">Introducción a las principales librerías: NumPy, Pandas, rasterio, GDAL y geopandas</a></li>

</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">modulo_introduction_postgis</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Bases de datos espaciales: PostGIS y su integración con Python</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">modulo_example_postgis</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../modulo_example_postgis/1742549645_plantillanb/1742343747_plantillanb.html">Bases de datos espaciales: PostGIS y su integración con Python (Ejemplo de uso)</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../_sources/modulo_introduction_postgis/1742549645_plantillanb/1742343747_plantillanb.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Bases de datos espaciales: PostGIS y su integración con Python</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#definiciones-preliminares">Definiciones preliminares</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#el-lenguaje-sql">El lenguaje SQL</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crear-y-eliminar-tablas">Crear y eliminar tablas</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#insercion-de-datos">- Inserción de datos</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#consultas-basicas-con-select">- Consultas básicas con <code class="docutils literal notranslate"><span class="pre">SELECT</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#eliminacion-de-duplicados-con-distinct">- Eliminación de duplicados con <code class="docutils literal notranslate"><span class="pre">DISTINCT</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#uso-de-join-para-combinar-tablas">- Uso de <code class="docutils literal notranslate"><span class="pre">JOIN</span></code> para combinar tablas</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#subconsultas">- Subconsultas</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#uso-de-group-by-y-having">- Uso de <code class="docutils literal notranslate"><span class="pre">GROUP</span> <span class="pre">BY</span></code> y <code class="docutils literal notranslate"><span class="pre">HAVING</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#actualizacion-y-eliminacion-de-datos">- Actualización y eliminación de datos</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#eliminar-registros">- Eliminar registros</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#vistas">- Vistas</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#llaves-foraneas">- Llaves foráneas</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#transacciones">- Transacciones</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#postgresql">PostgreSQL</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#postgis">PostGIS</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#administracion-postgis">Administración PostGIS</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#modelo-de-datos-espacial">Modelo de datos espacial</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#tipos-de-datos-geograficos">Tipos de datos geográficos</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#calculo-de-atributos-geometricos">Cálculo de atributos geométricos</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#sistemas-de-referencia-espacial">Sistemas de referencia espacial</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#cargar-datos-espaciales-utilizando-sql">Cargar datos espaciales utilizando SQL</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#datos-vectoriales">- Datos vectoriales</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#utilizando-el-shapefile-loader">Utilizando el Shapefile Loader</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#extrayendo-datos-espaciales-vectoriales">Extrayendo datos espaciales vectoriales</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#datos-raster">- Datos raster</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#utilizando-el-rasters-loader">Utilizando el Rasters Loader</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#extrayendo-datos-espaciales-raster">Extrayendo datos espaciales ráster</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#obtener-metadatos-del-raster">Obtener metadatos del ráster</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#integracion-postgis-python">Integración PostGIS / Python</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#comparacion-entre-psycopg2-y-sqlalchemy-para-la-carga-de-datos-espaciales">Comparación entre <code class="docutils literal notranslate"><span class="pre">psycopg2</span></code> y <code class="docutils literal notranslate"><span class="pre">SQLAlchemy</span></code> para la carga de datos espaciales</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#referencias-y-recursos">Referencias y Recursos</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bases-de-datos-y-sql">🗃️ Bases de datos y SQL</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#postgis-y-funciones-espaciales">🌐 PostGIS y funciones espaciales</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#python-postgresql-postgis">🐍 Python + PostgreSQL/PostGIS</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#herramientas-y-entornos-de-desarrollo">💻 Herramientas y entornos de desarrollo</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="bases-de-datos-espaciales-postgis-y-su-integracion-con-python">
<h1>Bases de datos espaciales: PostGIS y su integración con Python<a class="headerlink" href="#bases-de-datos-espaciales-postgis-y-su-integracion-con-python" title="Link to this heading">#</a></h1>
<div class="danger admonition">
<p class="admonition-title">Guía para el docente</p>
<ul class="simple">
<li><p>Este material está diseñado para ser presentado en un entorno de JupyterBook.</p></li>
<li><p>Incluye ejemplos prácticos en SQL y Python, utilizando tanto <code class="docutils literal notranslate"><span class="pre">psycopg2</span></code> como <code class="docutils literal notranslate"><span class="pre">SQLAlchemy</span></code>.</p></li>
<li><p>El objetivo es facilitar la enseñanza de conceptos espaciales mediante actividades guiadas y un caso de estudio final.</p></li>
</ul>
</div>
<div class="note admonition">
<p class="admonition-title">Recursos</p>
<ul class="simple">
<li><p>Capa vectorial (Shapefile de muestras de cobertura): <a class="reference external" href="https://igacoffice365-my.sharepoint.com/:f:/r/personal/juans_hernandez_igac_gov_co/Documents/Recursos_BDE_PostGIS_Diplomado/Muestras_Ejemplo?csf=1&amp;amp;web=1&amp;amp;e=x8juEL">📥 Muestras_Ejemplo</a></p></li>
<li><p>Imagen satelital recortada (formato <code class="docutils literal notranslate"><span class="pre">.tif</span></code>): <a class="reference external" href="https://igacoffice365-my.sharepoint.com/:f:/r/personal/juans_hernandez_igac_gov_co/Documents/Recursos_BDE_PostGIS_Diplomado/Imagen_Ejemplo?csf=1&amp;amp;web=1&amp;amp;e=5ZURPK">📥 Imagen_Ejemplo</a></p></li>
</ul>
<p>**Es importante la descarga de los recursos para el desarrollo de la sesión. **</p>
</div>
<section id="definiciones-preliminares">
<h2>Definiciones preliminares<a class="headerlink" href="#definiciones-preliminares" title="Link to this heading">#</a></h2>
<p><strong>Base de datos</strong></p>
<p>“…Una base de datos es una recopilación organizada de información o datos estructurados, que normalmente se almacena de forma electrónica en un sistema informático. Normalmente, una base de datos está controlada por un sistema de gestión de bases de datos (DBMS). En conjunto, los datos y el DBMS, junto con las aplicaciones asociadas a ellos, reciben el nombre de sistema de bases de datos, abreviado normalmente a simplemente base de datos….”</p>
<p><strong>Lenguaje de consulta estructurada (SQL)</strong>
“…El SQL es un lenguaje de programación que utilizan casi todas las bases de datos relacionales para consultar, manipular y definir los datos, y para proporcionar control de acceso….”</p>
<p><strong>Software de base de datos</strong>
“…El software de base de datos se utiliza para crear, editar y mantener archivos y registros de bases de datos, lo que facilita la creación de archivos y registros, la entrada de datos, la edición de datos, la actualización y la creación de informes. El software también maneja el almacenamiento de datos, las copias de seguridad y la creación de informes, así como el control de acceso múltiple y la seguridad….”</p>
<p><strong>Sistema de gestión de bases de datos</strong>
“…Normalmente, una base de datos requiere un programa de software de bases de datos completo, conocido como sistema de gestión de bases de datos (DBMS). Un DBMS sirve como interfaz entre la base de datos y sus programas o usuarios finales, lo que permite a los usuarios recuperar, actualizar y gestionar cómo se organiza y se optimiza la información. Un DBMS también facilita la supervisión y el control de las bases de datos, lo que permite una variedad de operaciones administrativas como la supervisión del rendimiento, el ajuste, la copia de seguridad y la recuperación.
Algunos ejemplos de software de bases de datos o DBMS populares incluyen MySQL, Microsoft Access, Microsoft SQL Server, FileMaker Pro, Oracle Database y dBASE…”</p>
<p>Oracle (<a class="reference external" href="https://www.oracle.com/co/database/what-is-database/">https://www.oracle.com/co/database/what-is-database/</a>)</p>
<p><strong>PostgreSQL</strong>
“…PostgreSQL es un sistema de gestión de bases de datos relacionales de objetos ( ORDBMS ) basado en POSTGRES, versión 4.2 , desarrollado en el Departamento de Informática de la Universidad de California en Berkeley. POSTGRES fue pionero en muchos conceptos que solo estuvieron disponibles en algunos sistemas de bases de datos comerciales mucho más tarde….”</p>
<p>PostgreSQL (<a class="reference external" href="https://www.postgresql.org/docs/current/intro-whatis.html">https://www.postgresql.org/docs/current/intro-whatis.html</a>)</p>
</section>
<section id="el-lenguaje-sql">
<h2>El lenguaje SQL<a class="headerlink" href="#el-lenguaje-sql" title="Link to this heading">#</a></h2>
<p>“…El lenguaje de consulta estructurada (SQL) es un lenguaje estándar para la creación y manipulación de bases de datos…”</p>
<p>AWS (<a class="reference external" href="https://aws.amazon.com/es/what-is/sql/#:~:text=El%20lenguaje%20de%20consulta%20estructurada%20(SQL)%20es%20un%20lenguaje%20est%C3%A1ndar,relacional%20que%20utiliza%20consultas%20SQL.">https://aws.amazon.com/es/what-is/sql/#:~:text=El lenguaje de consulta estructurada (SQL) es un lenguaje estándar,relacional que utiliza consultas SQL.</a>)</p>
<section id="crear-y-eliminar-tablas">
<h3>Crear y eliminar tablas<a class="headerlink" href="#crear-y-eliminar-tablas" title="Link to this heading">#</a></h3>
<p>Primero se define la estructura de la tabla <code class="docutils literal notranslate"><span class="pre">clima</span></code>, con los campos necesarios:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">clima</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="n">ciudad</span><span class="w">           </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">80</span><span class="p">),</span><span class="w">  </span><span class="c1">-- Nombre de la ciudad</span>
<span class="w">    </span><span class="n">temperatura_min</span><span class="w">  </span><span class="nb">INT</span><span class="p">,</span><span class="w">          </span><span class="c1">-- Temperatura mínima (°C)</span>
<span class="w">    </span><span class="n">temperatura_max</span><span class="w">  </span><span class="nb">INT</span><span class="p">,</span><span class="w">          </span><span class="c1">-- Temperatura máxima (°C)</span>
<span class="w">    </span><span class="n">precipitacion</span><span class="w">    </span><span class="nb">REAL</span><span class="p">,</span><span class="w">         </span><span class="c1">-- Precipitación (mm)</span>
<span class="w">    </span><span class="n">fecha_registro</span><span class="w">   </span><span class="nb">DATE</span><span class="w">          </span><span class="c1">-- Fecha del registro</span>
<span class="p">);</span>
</pre></div>
</div>
<p>Para eliminarla cuando ya no se necesite:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">DROP</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">clima</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="insercion-de-datos">
<h3>- Inserción de datos<a class="headerlink" href="#insercion-de-datos" title="Link to this heading">#</a></h3>
<p>Podemos insertar un nuevo registro:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">clima</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;Bogotá&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w"> </span><span class="mi">18</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">.</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;2023-06-15&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>O especificar las columnas explícitamente:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">clima</span><span class="w"> </span><span class="p">(</span><span class="n">ciudad</span><span class="p">,</span><span class="w"> </span><span class="n">temperatura_min</span><span class="p">,</span><span class="w"> </span><span class="n">temperatura_max</span><span class="p">,</span><span class="w"> </span><span class="n">precipitacion</span><span class="p">,</span><span class="w"> </span><span class="n">fecha_registro</span><span class="p">)</span>
<span class="w">    </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;Medellín&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">18</span><span class="p">,</span><span class="w"> </span><span class="mi">27</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">.</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;2023-06-15&#39;</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="consultas-basicas-con-select">
<h3>- Consultas básicas con <code class="docutils literal notranslate"><span class="pre">SELECT</span></code><a class="headerlink" href="#consultas-basicas-con-select" title="Link to this heading">#</a></h3>
<p>Obtener todos los registros:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">clima</span><span class="p">;</span>
</pre></div>
</div>
<p>Seleccionar columnas específicas:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="n">ciudad</span><span class="p">,</span><span class="w"> </span><span class="n">precipitacion</span><span class="p">,</span><span class="w"> </span><span class="n">fecha_registro</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">clima</span><span class="p">;</span>
</pre></div>
</div>
<p>Calcular la temperatura promedio:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="n">ciudad</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="n">temperatura_max</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">temperatura_min</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">temperatura_promedio</span><span class="p">,</span><span class="w"> </span><span class="n">fecha_registro</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">clima</span><span class="p">;</span>
</pre></div>
</div>
<p>Filtrar registros por condiciones (ej. días con lluvia en Bogotá):</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">clima</span>
<span class="w">    </span><span class="k">WHERE</span><span class="w"> </span><span class="n">ciudad</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Bogotá&#39;</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="n">precipitacion</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">.</span><span class="mi">0</span><span class="p">;</span>
</pre></div>
</div>
<p>Ordenar resultados por ciudad:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">clima</span><span class="w"> </span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">ciudad</span><span class="p">;</span>
</pre></div>
</div>
<p>Ordenar por ciudad y temperatura mínima:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">clima</span><span class="w"> </span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">ciudad</span><span class="p">,</span><span class="w"> </span><span class="n">temperatura_min</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="eliminacion-de-duplicados-con-distinct">
<h3>- Eliminación de duplicados con <code class="docutils literal notranslate"><span class="pre">DISTINCT</span></code><a class="headerlink" href="#eliminacion-de-duplicados-con-distinct" title="Link to this heading">#</a></h3>
<p>Obtener una lista única de ciudades registradas:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="k">DISTINCT</span><span class="w"> </span><span class="n">ciudad</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">clima</span><span class="p">;</span>
</pre></div>
</div>
<p>Ordenar alfabéticamente:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="k">DISTINCT</span><span class="w"> </span><span class="n">ciudad</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">clima</span><span class="w"> </span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">ciudad</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="uso-de-join-para-combinar-tablas">
<h3>- Uso de <code class="docutils literal notranslate"><span class="pre">JOIN</span></code> para combinar tablas<a class="headerlink" href="#uso-de-join-para-combinar-tablas" title="Link to this heading">#</a></h3>
<p>Si tenemos otra tabla llamada ciudades con datos geográficos, podemos unirla con clima:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">clima</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">ciudades</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">clima</span><span class="p">.</span><span class="n">ciudad</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ciudades</span><span class="p">.</span><span class="n">nombre</span><span class="p">;</span>
</pre></div>
</div>
<p>Seleccionar solo columnas relevantes:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="n">clima</span><span class="p">.</span><span class="n">ciudad</span><span class="p">,</span><span class="w"> </span><span class="n">clima</span><span class="p">.</span><span class="n">temperatura_min</span><span class="p">,</span><span class="w"> </span><span class="n">clima</span><span class="p">.</span><span class="n">temperatura_max</span><span class="p">,</span><span class="w"> </span><span class="n">clima</span><span class="p">.</span><span class="n">precipitacion</span><span class="p">,</span><span class="w"> </span><span class="n">clima</span><span class="p">.</span><span class="n">fecha_registro</span><span class="p">,</span><span class="w"> </span><span class="n">ciudades</span><span class="p">.</span><span class="n">ubicacion</span>
<span class="w">    </span><span class="k">FROM</span><span class="w"> </span><span class="n">clima</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">ciudades</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">clima</span><span class="p">.</span><span class="n">ciudad</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ciudades</span><span class="p">.</span><span class="n">nombre</span><span class="p">;</span>
</pre></div>
</div>
<p>También podemos hacer una unión externa (LEFT JOIN):</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">clima</span><span class="w"> </span><span class="k">LEFT</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">ciudades</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">clima</span><span class="p">.</span><span class="n">ciudad</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ciudades</span><span class="p">.</span><span class="n">nombre</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="subconsultas">
<h3>- Subconsultas<a class="headerlink" href="#subconsultas" title="Link to this heading">#</a></h3>
<p>Obtener la temperatura mínima más alta registrada:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="k">MAX</span><span class="p">(</span><span class="n">temperatura_min</span><span class="p">)</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">clima</span><span class="p">;</span>
</pre></div>
</div>
<p>Y la ciudad correspondiente:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="n">ciudad</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">clima</span>
<span class="w">    </span><span class="k">WHERE</span><span class="w"> </span><span class="n">temperatura_min</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="k">SELECT</span><span class="w"> </span><span class="k">MAX</span><span class="p">(</span><span class="n">temperatura_min</span><span class="p">)</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">clima</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="uso-de-group-by-y-having">
<h3>- Uso de <code class="docutils literal notranslate"><span class="pre">GROUP</span> <span class="pre">BY</span></code> y <code class="docutils literal notranslate"><span class="pre">HAVING</span></code><a class="headerlink" href="#uso-de-group-by-y-having" title="Link to this heading">#</a></h3>
<p>Contar registros por ciudad y mostrar la temperatura mínima más alta:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="n">ciudad</span><span class="p">,</span><span class="w"> </span><span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">),</span><span class="w"> </span><span class="k">MAX</span><span class="p">(</span><span class="n">temperatura_min</span><span class="p">)</span>
<span class="w">    </span><span class="k">FROM</span><span class="w"> </span><span class="n">clima</span>
<span class="w">    </span><span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">ciudad</span><span class="p">;</span>
</pre></div>
</div>
<p>Filtrar los grupos donde la temperatura mínima fue menor a 10 °C:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="n">ciudad</span><span class="p">,</span><span class="w"> </span><span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">),</span><span class="w"> </span><span class="k">MAX</span><span class="p">(</span><span class="n">temperatura_min</span><span class="p">)</span>
<span class="w">    </span><span class="k">FROM</span><span class="w"> </span><span class="n">clima</span>
<span class="w">    </span><span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">ciudad</span>
<span class="w">    </span><span class="k">HAVING</span><span class="w"> </span><span class="k">MAX</span><span class="p">(</span><span class="n">temperatura_min</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span>
</pre></div>
</div>
<p>Filtrar dentro de una función agregada:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="n">ciudad</span><span class="p">,</span><span class="w"> </span><span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="n">FILTER</span><span class="w"> </span><span class="p">(</span><span class="k">WHERE</span><span class="w"> </span><span class="n">temperatura_min</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">15</span><span class="p">),</span><span class="w"> </span><span class="k">MAX</span><span class="p">(</span><span class="n">temperatura_min</span><span class="p">)</span>
<span class="w">    </span><span class="k">FROM</span><span class="w"> </span><span class="n">clima</span>
<span class="w">    </span><span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">ciudad</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="actualizacion-y-eliminacion-de-datos">
<h3>- Actualización y eliminación de datos<a class="headerlink" href="#actualizacion-y-eliminacion-de-datos" title="Link to this heading">#</a></h3>
<p>Modificar los valores de temperatura:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">UPDATE</span><span class="w"> </span><span class="n">clima</span>
<span class="k">SET</span><span class="w"> </span><span class="n">temperatura_max</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">temperatura_max</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span>
<span class="w">    </span><span class="n">temperatura_min</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">temperatura_min</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">2</span>
<span class="k">WHERE</span><span class="w"> </span><span class="n">fecha_registro</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="s1">&#39;2023-06-14&#39;</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="eliminar-registros">
<h3>- Eliminar registros<a class="headerlink" href="#eliminar-registros" title="Link to this heading">#</a></h3>
<p>Eliminar los datos de una ciudad específica:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">DELETE</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">clima</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">ciudad</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Cartagena&#39;</span><span class="p">;</span>
</pre></div>
</div>
<p>Además de consultar e insertar datos, SQL permite construir estructuras más complejas que ayudan a organizar, proteger y mantener la integridad de la información. A continuación se explican tres conceptos clave: <strong>vistas</strong>, <strong>llaves foráneas</strong> y <strong>transacciones</strong>.</p>
</section>
<section id="vistas">
<h3>- Vistas<a class="headerlink" href="#vistas" title="Link to this heading">#</a></h3>
<p>Una <strong>vista</strong> es una “tabla virtual” que guarda una <strong>consulta</strong> y permite reutilizarla como si fuera una tabla real. No almacena los datos, sino que se actualiza automáticamente cada vez que se accede a ella.
Por ejemplo, si queremos unir información de dos tablas (<code class="docutils literal notranslate"><span class="pre">clima</span></code> y <code class="docutils literal notranslate"><span class="pre">ciudades</span></code>), podemos crear una vista:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span><span class="w"> </span><span class="k">VIEW</span><span class="w"> </span><span class="n">vista_clima_ciudades</span><span class="w"> </span><span class="k">AS</span>
<span class="w">    </span><span class="k">SELECT</span><span class="w"> </span><span class="n">nombre_ciudad</span><span class="p">,</span><span class="w"> </span><span class="n">temperatura_min</span><span class="p">,</span><span class="w"> </span><span class="n">temperatura_max</span><span class="p">,</span><span class="w"> </span><span class="n">precipitacion</span><span class="p">,</span><span class="w"> </span><span class="n">fecha_registro</span><span class="p">,</span><span class="w"> </span><span class="n">ubicacion</span>
<span class="w">        </span><span class="k">FROM</span><span class="w"> </span><span class="n">clima</span><span class="p">,</span><span class="w"> </span><span class="n">ciudades</span>
<span class="w">        </span><span class="k">WHERE</span><span class="w"> </span><span class="n">clima</span><span class="p">.</span><span class="n">ciudad</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ciudades</span><span class="p">.</span><span class="n">nombre_ciudad</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="llaves-foraneas">
<h3>- Llaves foráneas<a class="headerlink" href="#llaves-foraneas" title="Link to this heading">#</a></h3>
<p>Una <strong>llave foránea</strong> establece una relación entre dos tablas. Garantiza que los valores en una columna (como una ciudad en clima) existan previamente en otra tabla (como
ciudades). Esto ayuda a mantener la integridad de los datos.
Primero, creamos la tabla de ciudades:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">ciudades</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="n">nombre_ciudad</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">80</span><span class="p">)</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="p">,</span>
<span class="w">    </span><span class="n">ubicacion</span><span class="w">     </span><span class="n">POINT</span>
<span class="p">);</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">clima</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="n">ciudad</span><span class="w">           </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">80</span><span class="p">)</span><span class="w"> </span><span class="k">REFERENCES</span><span class="w"> </span><span class="n">ciudades</span><span class="p">(</span><span class="n">nombre_ciudad</span><span class="p">),</span>
<span class="w">    </span><span class="n">temperatura_min</span><span class="w">  </span><span class="nb">INT</span><span class="p">,</span>
<span class="w">    </span><span class="n">temperatura_max</span><span class="w">  </span><span class="nb">INT</span><span class="p">,</span>
<span class="w">    </span><span class="n">precipitacion</span><span class="w">    </span><span class="nb">REAL</span><span class="p">,</span>
<span class="w">    </span><span class="n">fecha_registro</span><span class="w">   </span><span class="nb">DATE</span>
<span class="p">);</span>
</pre></div>
</div>
<p>Si intentamos insertar un registro con una ciudad que no existe en la tabla ciudades, obtendremos un error:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">clima</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;Tunja&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w"> </span><span class="mi">18</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">.</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;2023-06-15&#39;</span><span class="p">);</span>
<span class="n">ERROR</span><span class="p">:</span><span class="w">  </span><span class="k">insert</span><span class="w"> </span><span class="k">or</span><span class="w"> </span><span class="k">update</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="ss">&quot;clima&quot;</span><span class="w"> </span><span class="n">violates</span><span class="w"> </span><span class="k">foreign</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="k">constraint</span><span class="w"> </span><span class="ss">&quot;clima_ciudad_fkey&quot;</span>
<span class="n">DETAIL</span><span class="p">:</span><span class="w">  </span><span class="k">Key</span><span class="w"> </span><span class="p">(</span><span class="n">ciudad</span><span class="p">)</span><span class="o">=</span><span class="p">(</span><span class="n">Tunja</span><span class="p">)</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="n">present</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="ss">&quot;ciudades&quot;</span><span class="p">.</span>
</pre></div>
</div>
</section>
<section id="transacciones">
<h3>- Transacciones<a class="headerlink" href="#transacciones" title="Link to this heading">#</a></h3>
<p>Una <strong>transacción</strong> permite agrupar varias operaciones para que se ejecuten como una sola unidad. Si alguna falla, se puede <strong>revertir</strong> todo, asegurando que los datos no queden en un estado incompleto.
Ejemplo con una tabla de cuentas:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">BEGIN</span><span class="p">;</span>
<span class="c1">-- Restar dinero a una cuenta</span>
<span class="k">UPDATE</span><span class="w"> </span><span class="n">cuentas</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">saldo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">saldo</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">100</span><span class="p">.</span><span class="mi">00</span>
<span class="w">    </span><span class="k">WHERE</span><span class="w"> </span><span class="n">titular</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Alicia&#39;</span><span class="p">;</span>
<span class="c1">-- Crear un punto de guardado</span>
<span class="n">SAVEPOINT</span><span class="w"> </span><span class="n">punto_intermedio</span><span class="p">;</span>
<span class="c1">-- Intentar sumar dinero a otra cuenta</span>
<span class="k">UPDATE</span><span class="w"> </span><span class="n">cuentas</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">saldo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">saldo</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">100</span><span class="p">.</span><span class="mi">00</span>
<span class="w">    </span><span class="k">WHERE</span><span class="w"> </span><span class="n">titular</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Bob&#39;</span><span class="p">;</span>
<span class="c1">-- Ups... no era Bob, revertimos al punto anterior</span>
<span class="k">ROLLBACK</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="n">punto_intermedio</span><span class="p">;</span>
<span class="c1">-- Ahora sumamos a la cuenta correcta</span>
<span class="k">UPDATE</span><span class="w"> </span><span class="n">cuentas</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">saldo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">saldo</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">100</span><span class="p">.</span><span class="mi">00</span>
<span class="w">    </span><span class="k">WHERE</span><span class="w"> </span><span class="n">titular</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Walter&#39;</span><span class="p">;</span>
<span class="c1">-- Confirmamos todo</span>
<span class="k">COMMIT</span><span class="p">;</span>
</pre></div>
</div>
<p>Entre otros… (<a class="reference external" href="https://www.postgresql.org/docs/current/">https://www.postgresql.org/docs/current/</a>)</p>
</section>
</section>
<section id="postgresql">
<h2>PostgreSQL<a class="headerlink" href="#postgresql" title="Link to this heading">#</a></h2>
<p>“…PostgreSQL es un sistema de gestión de bases de datos relacionales de objetos (ORDBMS), desarrollado en el Departamento de Informática de la Universidad de California en Berkeley. PostgreSQL fue pionero en muchos conceptos que solo estuvieron disponibles en algunos sistemas de bases de datos comerciales mucho más tarde…Y gracias a la licencia liberal, PostgreSQL puede ser utilizado, modificado y distribuido por cualquier persona de forma gratuita y para cualquier propósito, ya sea privado, comercial o académico”
PostgreSQL (<a class="reference external" href="https://www.postgresql.org/docs/current/intro-whatis.html">https://www.postgresql.org/docs/current/intro-whatis.html</a>)</p>
</section>
<section id="postgis">
<h2>PostGIS<a class="headerlink" href="#postgis" title="Link to this heading">#</a></h2>
<p>“…PostGIS amplía las capacidades de la base de datos relacional PostgreSQL al agregar soporte para almacenar, indexar y consultar datos geoespaciales….”
Las características de PostGIS incluyen:</p>
<ul class="simple">
<li><p><strong>Almacenamiento de datos espaciales:</strong> almacene diferentes tipos de datos espaciales, como puntos, líneas, polígonos y multigeometrías, tanto en datos 2D como 3D.</p></li>
<li><p><strong>Indexación espacial:</strong> busque y recupere rápidamente datos espaciales en función de su ubicación.</p></li>
<li><p><strong>Funciones espaciales:</strong> una amplia gama de funciones espaciales que le permiten filtrar y analizar datos espaciales, medir distancias y áreas , intersecar geometrías, crear búferes y más.</p></li>
<li><p><strong>Procesamiento de geometría:</strong> herramientas para procesar y manipular datos geométricos, como simplificación , conversión y generalización.</p></li>
<li><p><strong>Soporte de datos ráster:</strong> almacenamiento y procesamiento de datos ráster , como datos de elevación y datos meteorológicos.</p></li>
<li><p><strong>Geocodificación y geocodificación inversa:</strong> Funciones para geocodificación y geocodificación inversa.</p></li>
<li><p><strong>Integración:</strong> acceda y trabaje con PostGIS utilizando herramientas de terceros como QGIS , GeoServer , MapServer , ArcGIS, Tableau.</p></li>
</ul>
<p>PostGIS (<a class="reference external" href="https://postgis.net/">https://postgis.net/</a>)</p>
</section>
<section id="administracion-postgis">
<h2>Administración PostGIS<a class="headerlink" href="#administracion-postgis" title="Link to this heading">#</a></h2>
<section id="modelo-de-datos-espacial">
<h3>Modelo de datos espacial<a class="headerlink" href="#modelo-de-datos-espacial" title="Link to this heading">#</a></h3>
<p><strong>OGC Geometry</strong></p>
<ul class="simple">
<li><p><strong>Point.</strong> Geometría de 0 dimensiones que representa una única ubicación en el espacio de coordenadas.</p></li>
</ul>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">POINT</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span>
<span class="n">POINT</span><span class="w"> </span><span class="n">Z</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span>
<span class="n">POINT</span><span class="w"> </span><span class="n">ZM</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p><strong>LineString.</strong> Línea unidimensional formada por una secuencia contigua de segmentos.</p></li>
</ul>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">LINESTRING</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="mi">6</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p><strong>LinearRing.</strong> Cadena Lineal cerrada y simple. El primer y el último punto deben ser iguales, y la línea no debe autointersecarse.</p></li>
</ul>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">LINEARRING</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p><strong>Polygon.</strong> Región plana bidimensional, delimitada por un límite exterior (la capa) y ninguno o más límites interiores (agujeros).</p></li>
</ul>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">POLYGON</span><span class="w"> </span><span class="p">((</span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="mi">4</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="mi">4</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="p">),(</span><span class="mi">1</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">0</span><span class="p">))</span>
</pre></div>
</div>
<ul class="simple">
<li><p><strong>MultiPoint.</strong> Colección de Puntos.</p></li>
</ul>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">MULTIPOINT</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p><strong>MultiLineString.</strong> Colección de LineStrings.</p></li>
</ul>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">MULTILINESTRING</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="mi">5</span><span class="w"> </span><span class="mi">4</span><span class="p">)</span><span class="w"> </span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p><strong>MultiPolygon.</strong> Conjunto de polígonos no superpuestos ni adyacentes. Los polígonos del conjunto solo pueden tocarse en un número finito de puntos.</p></li>
</ul>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">MULTIPOLYGON</span><span class="w"> </span><span class="p">(((</span><span class="mi">1</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">5</span><span class="p">)),</span><span class="w"> </span><span class="p">((</span><span class="mi">6</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">9</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="mi">5</span><span class="p">)))</span>
</pre></div>
</div>
<ul class="simple">
<li><p><strong>GeometryCollection.</strong> Colección heterogénea (mixta) de geometrías.</p></li>
</ul>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">GEOMETRYCOLLECTION</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">POINT</span><span class="p">(</span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="p">),</span><span class="w"> </span><span class="n">LINESTRING</span><span class="p">(</span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">4</span><span class="p">))</span>
</pre></div>
</div>
<ul class="simple">
<li><p><strong>PolyhedralSurface.</strong> Colección contigua de parches o facetas que comparten algunas aristas. Cada parche es un polígono plano. Si las coordenadas del polígono tienen coordenadas Z, la superficie es tridimensional.</p></li>
</ul>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">POLYHEDRALSURFACE</span><span class="w"> </span><span class="n">Z</span><span class="w"> </span><span class="p">(</span>
<span class="w">  </span><span class="p">((</span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="p">)),</span>
<span class="w">  </span><span class="p">((</span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="p">)),</span>
<span class="w">  </span><span class="p">((</span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="p">)),</span>
<span class="w">  </span><span class="p">((</span><span class="mi">1</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">0</span><span class="p">)),</span>
<span class="w">  </span><span class="p">((</span><span class="mi">0</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">0</span><span class="p">)),</span>
<span class="w">  </span><span class="p">((</span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">1</span><span class="p">))</span><span class="w"> </span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p><strong>Triangle.</strong> Polígono definido por tres vértices distintos no colineales. Al ser un polígono, se define mediante cuatro coordenadas, siendo la primera y la cuarta iguales.</p></li>
</ul>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">TRIANGLE</span><span class="w"> </span><span class="p">((</span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">9</span><span class="p">,</span><span class="w"> </span><span class="mi">9</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="p">))</span>
</pre></div>
</div>
<ul class="simple">
<li><p><strong>TIN.</strong> Colección de triángulos no superpuestos que representan una red irregular triangulada.</p></li>
</ul>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">TIN</span><span class="w"> </span><span class="n">Z</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="p">((</span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="p">)),</span><span class="w"> </span><span class="p">((</span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="p">))</span><span class="w"> </span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="tipos-de-datos-geograficos">
<h3>Tipos de datos geográficos<a class="headerlink" href="#tipos-de-datos-geograficos" title="Link to this heading">#</a></h3>
<p><strong>Geographic</strong>
“…El tipo de datos PostGIS geography proporciona compatibilidad nativa con entidades espaciales representadas en coordenadas geográficas (o “lat/lon”). Las coordenadas geográficas son coordenadas esféricas expresadas en unidades angulares (grados)…”</p>
<p><strong>Geometry</strong>
“…La base del tipo de datos geométricos de PostGIS es un plano….”</p>
</section>
<section id="calculo-de-atributos-geometricos">
<h3>Cálculo de atributos geométricos<a class="headerlink" href="#calculo-de-atributos-geometricos" title="Link to this heading">#</a></h3>
<p>El camino más corto entre dos puntos en el plano es una línea recta. Esto significa que las funciones geométricas (áreas, distancias, longitudes, intersecciones, etc.) se calculan utilizando vectores de línea recta y matemáticas cartesianas. Esto facilita su implementación y agiliza su ejecución, pero también las hace imprecisas para datos sobre la superficie esferoidal de la Tierra.</p>
<p>El tipo de datos geográficos de PostGIS se basa en un modelo esférico. El camino más corto entre dos puntos de la esfera es un arco de círculo máximo. Las funciones sobre geografías (áreas, distancias, longitudes, intersecciones, etc.) se calculan utilizando arcos de la esfera. Al considerar la forma esferoidal del mundo, las funciones proporcionan resultados más precisos.</p>
<p>Creación de tablas de geografía</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">global_points</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="n">id</span><span class="w"> </span><span class="nb">SERIAL</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="p">,</span>
<span class="w">    </span><span class="n">name</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">64</span><span class="p">),</span>
<span class="w">    </span><span class="k">location</span><span class="w"> </span><span class="n">geography</span><span class="p">(</span><span class="n">POINT</span><span class="p">,</span><span class="w"> </span><span class="mi">4326</span><span class="p">)</span>
<span class="w">  </span><span class="p">);</span>
</pre></div>
</div>
<p>Utilizando tablas de geografía</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">global_points</span><span class="w"> </span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="k">location</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;Town&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;SRID=4326;POINT(-110 30)&#39;</span><span class="p">);</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">global_points</span><span class="w"> </span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="k">location</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;Forest&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;SRID=4326;POINT(-109 29)&#39;</span><span class="p">);</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">global_points</span><span class="w"> </span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="k">location</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;London&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;SRID=4326;POINT(0 49)&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>Consulta de una distancia utilizando una tolerancia de 1000km</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">global_points</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">ST_DWithin</span><span class="p">(</span><span class="k">location</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;SRID=4326;POINT(-110 29)&#39;</span><span class="p">::</span><span class="n">geography</span><span class="p">,</span><span class="w"> </span><span class="mi">1000000</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>¿Cuándo utilizar el tipo de datos geografía?</strong>
El tipo de datos geografía le permite almacenar datos en coordenadas de longitud/latitud, pero a un costo: hay menos funciones definidas en GEOGRAPHY que en GEOMETRY; las funciones que están definidas toman más tiempo de CPU para ejecutarse.
El tipo de datos que elija debe determinarse según el área de trabajo prevista de la aplicación que esté desarrollando. ¿Sus datos abarcarán todo el mundo, una gran área continental, o son locales, de un estado, condado o municipio?</p>
<ul class="simple">
<li><p>Si sus datos están contenidos en un área pequeña, es posible que elegir una proyección adecuada y utilizar GEOMETRÍA sea la mejor solución, en términos de rendimiento y funcionalidad disponibles.</p></li>
<li><p>Si sus datos son globales o cubren una región continental, GEOGRAPHY le permitirá crear un sistema sin preocuparse por los detalles de proyección. Almacene sus datos en longitud/latitud y utilice las funciones definidas en GEOGRAPHY.</p></li>
<li><p>Si no entiendes las proyecciones, no quieres aprender sobre ellas y estás dispuesto a aceptar las limitaciones de funcionalidad de GEOGRAPHY, quizás te resulte más fácil usar GEOGRAPHY que GEOMETRY. Simplemente carga tus datos como longitud/latitud y empieza desde ahí.</p></li>
</ul>
</section>
<section id="sistemas-de-referencia-espacial">
<h3>Sistemas de referencia espacial<a class="headerlink" href="#sistemas-de-referencia-espacial" title="Link to this heading">#</a></h3>
<p>Un <strong>Sistema de Referencia Espacial (SRE)</strong> (también llamado <strong>Sistema de Referencia de Coordenadas (SRC)</strong>) define cómo se referencia la geometría a ubicaciones en la superficie terrestre. Existen tres tipos de SRE:</p>
<ul class="simple">
<li><p>Un <strong>SRS geodésico</strong> utiliza coordenadas angulares (longitud y latitud) que se asignan directamente a la superficie de la tierra.</p></li>
<li><p>Un <strong>SRS proyectado</strong> utiliza una transformación matemática de proyección para aplanar la superficie de la Tierra esferoidal sobre un plano. Asigna coordenadas de ubicación que permiten la medición directa de magnitudes como la distancia, el área y el ángulo. El sistema de coordenadas es cartesiano, lo que significa que tiene un punto de origen definido y dos ejes perpendiculares (generalmente orientados al norte y al este). Cada SRS proyectado utiliza una unidad de longitud establecida (generalmente metros o pies). Un SRS proyectado puede tener un área de aplicación limitada para evitar distorsiones y ajustarse a los límites de coordenadas definidos.</p></li>
<li><p>Un <strong>SRS local</strong> es un sistema de coordenadas cartesiano que no está referenciado a la superficie terrestre. En PostGIS, esto se especifica mediante un valor SRID de 0.</p></li>
</ul>
<p>Tabla <strong>SPATIAL_REF_SYS</strong></p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">spatial_ref_sys</span><span class="w"> </span><span class="p">(</span>
<span class="w">  </span><span class="n">srid</span><span class="w">       </span><span class="nb">INTEGER</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="p">,</span>
<span class="w">  </span><span class="n">auth_name</span><span class="w">  </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">256</span><span class="p">),</span>
<span class="w">  </span><span class="n">auth_srid</span><span class="w">  </span><span class="nb">INTEGER</span><span class="p">,</span>
<span class="w">  </span><span class="n">srtext</span><span class="w">     </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">2048</span><span class="p">),</span>
<span class="w">  </span><span class="n">proj4text</span><span class="w">  </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">2048</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
<p>srtext</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">PROJCS</span><span class="p">[</span><span class="ss">&quot;NAD83 / UTM Zone 10N&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="n">GEOGCS</span><span class="p">[</span><span class="ss">&quot;NAD83&quot;</span><span class="p">,</span>
<span class="w">	</span><span class="n">DATUM</span><span class="p">[</span><span class="ss">&quot;North_American_Datum_1983&quot;</span><span class="p">,</span>
<span class="w">	  </span><span class="n">SPHEROID</span><span class="p">[</span><span class="ss">&quot;GRS 1980&quot;</span><span class="p">,</span><span class="mi">6378137</span><span class="p">,</span><span class="mi">298</span><span class="p">.</span><span class="mi">257222101</span><span class="p">]</span>
<span class="w">	</span><span class="p">],</span>
<span class="w">	</span><span class="n">PRIMEM</span><span class="p">[</span><span class="ss">&quot;Greenwich&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
<span class="w">	</span><span class="n">UNIT</span><span class="p">[</span><span class="ss">&quot;degree&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">.</span><span class="mi">0174532925199433</span><span class="p">]</span>
<span class="w">  </span><span class="p">],</span>
<span class="w">  </span><span class="n">PROJECTION</span><span class="p">[</span><span class="ss">&quot;Transverse_Mercator&quot;</span><span class="p">],</span>
<span class="w">  </span><span class="k">PARAMETER</span><span class="p">[</span><span class="ss">&quot;latitude_of_origin&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
<span class="w">  </span><span class="k">PARAMETER</span><span class="p">[</span><span class="ss">&quot;central_meridian&quot;</span><span class="p">,</span><span class="o">-</span><span class="mi">123</span><span class="p">],</span>
<span class="w">  </span><span class="k">PARAMETER</span><span class="p">[</span><span class="ss">&quot;scale_factor&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">.</span><span class="mi">9996</span><span class="p">],</span>
<span class="w">  </span><span class="k">PARAMETER</span><span class="p">[</span><span class="ss">&quot;false_easting&quot;</span><span class="p">,</span><span class="mi">500000</span><span class="p">],</span>
<span class="w">  </span><span class="k">PARAMETER</span><span class="p">[</span><span class="ss">&quot;false_northing&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
<span class="w">  </span><span class="n">UNIT</span><span class="p">[</span><span class="ss">&quot;metre&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
<p>Sistemas de referencia espacial definidos por el usuario</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">spatial_ref_sys</span><span class="w"> </span><span class="p">(</span><span class="n">srid</span><span class="p">,</span><span class="w"> </span><span class="n">proj4text</span><span class="p">)</span>
<span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="mi">990000</span><span class="p">,</span>
<span class="w">  </span><span class="s1">&#39;+proj=lcc  +lon_0=-95 +lat_0=25 +lat_1=25 +lat_2=25 +x_0=0 +y_0=0 +datum=WGS84 +units=m +no_defs&#39;</span>
<span class="p">);</span>
</pre></div>
</div>
</section>
<section id="cargar-datos-espaciales-utilizando-sql">
<h3>Cargar datos espaciales utilizando SQL<a class="headerlink" href="#cargar-datos-espaciales-utilizando-sql" title="Link to this heading">#</a></h3>
<section id="datos-vectoriales">
<h4>- Datos vectoriales<a class="headerlink" href="#datos-vectoriales" title="Link to this heading">#</a></h4>
<p>PostGIS permite cargar datos espaciales directamente usando comandos SQL, especialmente si estos datos están representados en formato de texto como <strong>WKT</strong> (Well-Known Text) o <strong>WKB</strong> (Well-Known Binary).
Este método es útil para cargar información de forma rápida desde archivos de texto o secuencias de comandos SQL, sin depender de herramientas externas como QGIS o <code class="docutils literal notranslate"><span class="pre">ogr2ogr</span></code>.
En este ejemplo, vamos a insertar datos de líneas (calles o carreteras) utilizando geometrías en formato <code class="docutils literal notranslate"><span class="pre">LINESTRING</span></code>. Supongamos que ya existe una tabla llamada <code class="docutils literal notranslate"><span class="pre">vias</span></code> con los
siguientes campos:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">id_via</span></code> → identificador único de la vía</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geometria</span></code> → columna espacial con tipo <code class="docutils literal notranslate"><span class="pre">LINESTRING</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">nombre_via</span></code> → nombre de la vía
Los registros se insertan de forma masiva dentro de una transacción:</p></li>
</ul>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">BEGIN</span><span class="p">;</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">vias</span><span class="w"> </span><span class="p">(</span><span class="n">id_via</span><span class="p">,</span><span class="w"> </span><span class="n">geometria</span><span class="p">,</span><span class="w"> </span><span class="n">nombre_via</span><span class="p">)</span>
<span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;LINESTRING(191232 243118,191108 243242)&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Calle Jeff&#39;</span><span class="p">);</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">vias</span><span class="w"> </span><span class="p">(</span><span class="n">id_via</span><span class="p">,</span><span class="w"> </span><span class="n">geometria</span><span class="p">,</span><span class="w"> </span><span class="n">nombre_via</span><span class="p">)</span>
<span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;LINESTRING(189141 244158,189265 244817)&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Calle Geordie&#39;</span><span class="p">);</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">vias</span><span class="w"> </span><span class="p">(</span><span class="n">id_via</span><span class="p">,</span><span class="w"> </span><span class="n">geometria</span><span class="p">,</span><span class="w"> </span><span class="n">nombre_via</span><span class="p">)</span>
<span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;LINESTRING(192783 228138,192612 229814)&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Calle Paul&#39;</span><span class="p">);</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">vias</span><span class="w"> </span><span class="p">(</span><span class="n">id_via</span><span class="p">,</span><span class="w"> </span><span class="n">geometria</span><span class="p">,</span><span class="w"> </span><span class="n">nombre_via</span><span class="p">)</span>
<span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;LINESTRING(189412 252431,189631 259122)&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Avenida Graeme&#39;</span><span class="p">);</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">vias</span><span class="w"> </span><span class="p">(</span><span class="n">id_via</span><span class="p">,</span><span class="w"> </span><span class="n">geometria</span><span class="p">,</span><span class="w"> </span><span class="n">nombre_via</span><span class="p">)</span>
<span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;LINESTRING(190131 224148,190871 228134)&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Terraza Phil&#39;</span><span class="p">);</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">vias</span><span class="w"> </span><span class="p">(</span><span class="n">id_via</span><span class="p">,</span><span class="w"> </span><span class="n">geometria</span><span class="p">,</span><span class="w"> </span><span class="n">nombre_via</span><span class="p">)</span>
<span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;LINESTRING(198231 263418,198213 268322)&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Callejón Dave&#39;</span><span class="p">);</span>
<span class="k">COMMIT</span><span class="p">;</span>
</pre></div>
</div>
<p>✅ Recomendación: Asegúrate de que la columna geometria esté definida con el tipo espacial adecuado, por ejemplo:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="n">AddGeometryColumn</span><span class="p">(</span><span class="s1">&#39;vias&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;geometria&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">4326</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;LINESTRING&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">);</span>
</pre></div>
</div>
<p>📌 Nota: Este método es ideal para volúmenes pequeños o cuando se trabaja con scripts personalizados. Para cargas masivas desde shapefiles o geojson, es preferible usar herramientas como shp2pgsql, ogr2ogr o directamente desde QGIS.</p>
</section>
</section>
<section id="utilizando-el-shapefile-loader">
<h3>Utilizando el Shapefile Loader<a class="headerlink" href="#utilizando-el-shapefile-loader" title="Link to this heading">#</a></h3>
<p>El <code class="docutils literal notranslate"><span class="pre">shp2pgsql</span></code> cargador de datos convierte los shapefiles a SQL, aptos para su inserción en bases de datos PostGIS/PostgreSQL, ya sea en formato geométrico o geográfico. El cargador dispone de varios modos de funcionamiento que se seleccionan mediante indicadores de línea de comandos.</p>
<p><code class="docutils literal notranslate"><span class="pre">-c</span></code>. Crea una nueva tabla y la rellena desde el shapefile. Este es el modo predeterminado.<br>
<code class="docutils literal notranslate"><span class="pre">-a</span></code>. Añade datos del shapefile a la tabla de la base de datos. Tenga en cuenta que para usar esta opción y cargar varios archivos, estos deben tener los mismos atributos y tipos de datos.<br>
<code class="docutils literal notranslate"><span class="pre">-d</span></code>. Elimina la tabla de base de datos antes de crear una nueva tabla con los datos en el Shapefile.<br>
<code class="docutils literal notranslate"><span class="pre">-p</span></code>. Solo genera el código SQL de creación de tablas, sin añadir datos. Esto se puede usar si necesita separar completamente los pasos de creación de tablas y carga de datos.<br>
<code class="docutils literal notranslate"><span class="pre">-s</span></code>. [&lt;FROM_SRID&gt;:]<SRID> Crea y rellena las tablas de geometría con el SRID especificado. Opcionalmente, especifica que el shapefile de entrada utilice el FROM_SRID dado, en cuyo caso las geometrías se reproyectarán al SRID de destino.<br>
<code class="docutils literal notranslate"><span class="pre">-i</span></code>. Convierte todos los números enteros en números enteros estándar de 32 bits, no crea bigints de 64 bits, incluso si la firma del encabezado DBF parece justificarlo.<br>
<code class="docutils literal notranslate"><span class="pre">-I</span></code>. Crea un índice GiST en la columna de geometría.</p>
<p>En la línea de comandos</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>shp2pgsql<span class="w"> </span>-c<span class="w"> </span>-s<span class="w"> </span><span class="m">4269</span><span class="w"> </span>-i<span class="w"> </span>-I<span class="w"> </span>shaperoads.shp<span class="w"> </span>myschema.roadstable<span class="w"> </span>&gt;<span class="w"> </span>carreteras.sql<span class="w"> </span>
psql<span class="w"> </span>-d<span class="w"> </span>carreterasdb<span class="w"> </span>-f<span class="w"> </span>carreteras.sql
</pre></div>
</div>
<p>También podría hacerse por medio de la interfaz gráfica. Buscando “PostGIS PostGIS Bundle 1 for PostgreSQL x64 16 Shapefile and DBF Loader Exporter”</p>
<ul class="simple">
<li><p>Realizar la conexión a la base de datos</p></li>
</ul>
<a class="reference internal image-reference" href="../../_images/PostGIS_Connection.PNG"><img alt="unidad" class="align-center" src="../../_images/PostGIS_Connection.PNG" style="width: 250px;" />
</a>
<p style="text-align: center; font-size: 12px;"> <strong>Fig. 1. Conexión a PostGIS </strong></p>
<ul class="simple">
<li><p>Verificar las opciones de importación según las necesidades del usuario</p></li>
</ul>
<a class="reference internal image-reference" href="../../_images/Options_Import_PostGIS.PNG"><img alt="unidad" class="align-center" src="../../_images/Options_Import_PostGIS.PNG" style="width: 300px;" />
</a>
<p style="text-align: center; font-size: 12px;"> <strong>Fig. 2. Opciones de importación - PostGIS </strong></p>
<ul class="simple">
<li><p>Buscar y cargar el archivo Shapefile verificando el nombre con el cual se guardará la tabla y el SRID</p></li>
</ul>
<a class="reference internal image-reference" href="../../_images/Load_Shp_PostGIS.PNG"><img alt="unidad" class="align-center" src="../../_images/Load_Shp_PostGIS.PNG" style="width: 300px;" />
</a>
<p style="text-align: center; font-size: 12px;"> <strong>Fig. 3. Cargar datos desde Shapefile </strong></p>
<p>Consultar más parámetros: <a class="reference external" href="https://postgis.net/docs/manual-3.5/using_postgis_dbmanagement.html#loading-data">https://postgis.net/docs/manual-3.5/using_postgis_dbmanagement.html#loading-data</a></p>
</section>
<section id="extrayendo-datos-espaciales-vectoriales">
<h3>Extrayendo datos espaciales vectoriales<a class="headerlink" href="#extrayendo-datos-espaciales-vectoriales" title="Link to this heading">#</a></h3>
<p>Una de las formas más directas de <strong>extraer información geoespacial</strong> desde PostGIS es utilizando consultas <code class="docutils literal notranslate"><span class="pre">SELECT</span></code> que devuelvan tanto los atributos como la geometría en un
formato legible.
📌 Nota: Esto es útil cuando se desea exportar los datos a archivos <code class="docutils literal notranslate"><span class="pre">.csv</span></code> o <code class="docutils literal notranslate"><span class="pre">.txt</span></code> o integrarlos en otros procesos de análisis fuera de la base de datos.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="n">id_via</span><span class="p">,</span><span class="w"> </span><span class="n">ST_AsText</span><span class="p">(</span><span class="n">geometria</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">geometria_wkt</span><span class="p">,</span><span class="w"> </span><span class="n">nombre_via</span>
<span class="w">    </span><span class="k">FROM</span><span class="w"> </span><span class="n">vias</span><span class="p">;</span>
</pre></div>
</div>
<p>Si deseamos filtrar solamente aquellas vías que intersectan con una geometría (por ejemplo, un polígono de interés), podemos usar la función <strong>ST_Intersects</strong>:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="n">id_via</span><span class="p">,</span><span class="w"> </span><span class="n">nombre_via</span>
<span class="w">    </span><span class="k">FROM</span><span class="w"> </span><span class="n">vias</span>
<span class="w">    </span><span class="k">WHERE</span><span class="w"> </span><span class="n">ST_Intersects</span><span class="p">(</span><span class="n">geometria</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;SRID=4326;POLYGON((...))&#39;</span><span class="p">);</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="../../_images/Functions_PostGIS.PNG"><img alt="unidad" class="align-center" src="../../_images/Functions_PostGIS.PNG" style="width: 300px;" />
</a>
<p style="text-align: center; font-size: 12px;"> 
<strong>Fig. 4. Ejemplos de funciones de PostGIS – PostGIS. https://postgis.net/docs/manual-1.5/ch08.html</strong>
</p>
<p>💡 Nota: Asegúrate de que la geometría proporcionada tenga el mismo SRID (sistema de referencia espacial) que la columna geometria. En este ejemplo, se usa SRID=4326.</p>
<section id="datos-raster">
<h4>- Datos raster<a class="headerlink" href="#datos-raster" title="Link to this heading">#</a></h4>
</section>
</section>
<section id="utilizando-el-rasters-loader">
<h3>Utilizando el Rasters Loader<a class="headerlink" href="#utilizando-el-rasters-loader" title="Link to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">raster2pgsql</span></code> es un ejecutable de carga de ráster que carga formatos ráster compatibles con GDAL en SQL, aptos para su carga en una tabla ráster PostGIS. Permite cargar carpetas de archivos ráster y crear vistas generales de rásteres. Dado que raster2pgsql se compila generalmente como parte de PostGIS (a menos que compile su propia biblioteca GDAL), los tipos de ráster compatibles con el ejecutable serán los mismos que los compilados en la biblioteca de dependencias de GDAL.</p>
<p>En la línea de comandos</p>
<p><code class="docutils literal notranslate"><span class="pre">-s</span></code>. SRID <br>
<code class="docutils literal notranslate"><span class="pre">-I</span></code>. Índice espacial<br>
<code class="docutils literal notranslate"><span class="pre">-C</span></code>. Utilizar restricciones ráster estándar.<br>
<code class="docutils literal notranslate"><span class="pre">-M</span></code>. Análisis de vacíos después de la carga<br>
<code class="docutils literal notranslate"><span class="pre">-F</span></code>. Incluye una columna de nombre de archivo en la tabla ráster.<br>
<code class="docutils literal notranslate"><span class="pre">-t</span></code>. Divide la salida en mosaicos de 100x100.<br></p>
<ul class="simple">
<li><p>*.tif carga todos estos archivos</p></li>
<li><p>public.demelevation cargar en esta tabla</p></li>
<li><p>-d conectarse a esta base de datos</p></li>
<li><p>-f lee este archivo después de conectarse</p></li>
</ul>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>raster2pgsql<span class="w"> </span>-s<span class="w"> </span><span class="m">4326</span><span class="w"> </span>-I<span class="w"> </span>-C<span class="w"> </span>-M<span class="w"> </span>-F<span class="w"> </span>-t<span class="w"> </span>100x100<span class="w"> </span>*.tif<span class="w"> </span>público.demelevation<span class="w"> </span>&gt;<span class="w"> </span>elev.sql
psql<span class="w"> </span>-d<span class="w"> </span>gisdb<span class="w"> </span>-f<span class="w"> </span>elev.sql
</pre></div>
</div>
<a class="reference internal image-reference" href="../../_images/Formats_Raster.PNG"><img alt="unidad" class="align-center" src="../../_images/Formats_Raster.PNG" style="width: 500px;" />
</a>
<p style="text-align: center; font-size: 12px;"> 
<strong>Fig. 5. Ejemplos de formatos de ráster de PostGIS – PostGIS. https://postgis.net/docs/using_raster_dataman.html</strong>
</p>
<p>Para mayor información (<a class="reference external" href="https://postgis.net/docs/using_raster_dataman.html">https://postgis.net/docs/using_raster_dataman.html</a>)</p>
</section>
<section id="extrayendo-datos-espaciales-raster">
<h3>Extrayendo datos espaciales ráster<a class="headerlink" href="#extrayendo-datos-espaciales-raster" title="Link to this heading">#</a></h3>
<p>PostGIS no solo permite trabajar con datos vectoriales (puntos, líneas, polígonos), sino que también es capaz de <strong>almacenar y consultar datos ráster</strong> de forma eficiente. Estos datos pueden representar información continua como imágenes satelitales, modelos de elevación digital, mapas de temperatura, entre otros.
A continuación, se presentan ejemplos de cómo extraer información de una tabla que contiene un campo ráster utilizando funciones especializadas de PostGIS.</p>
<section id="obtener-metadatos-del-raster">
<h4>Obtener metadatos del ráster<a class="headerlink" href="#obtener-metadatos-del-raster" title="Link to this heading">#</a></h4>
<p>La función <code class="docutils literal notranslate"><span class="pre">ST_Metadata</span></code> permite consultar propiedades como <strong>número de bandas</strong>, <strong>resolución</strong>, <strong>extensión espacial</strong>, etc.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="n">id_raster</span><span class="p">,</span><span class="w"> </span><span class="n">ST_Metadata</span><span class="p">(</span><span class="n">raster</span><span class="p">)</span>
<span class="w">    </span><span class="k">FROM</span><span class="w"> </span><span class="n">capa_raster</span><span class="p">;</span>
</pre></div>
</div>
<p>Para saber qué valor tiene el ráster en un punto determinado (por ejemplo, coordenadas X=1000, Y=2000):</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="n">ST_Value</span><span class="p">(</span><span class="n">raster</span><span class="p">,</span><span class="w"> </span><span class="n">ST_SetSRID</span><span class="p">(</span><span class="n">ST_Point</span><span class="p">(</span><span class="mi">1000</span><span class="p">,</span><span class="w"> </span><span class="mi">2000</span><span class="p">),</span><span class="w"> </span><span class="mi">4326</span><span class="p">))</span>
<span class="w">    </span><span class="k">FROM</span><span class="w"> </span><span class="n">capa_raster</span><span class="p">;</span>
</pre></div>
</div>
<p>Esta consulta devuelve los rásteres que se superponen con una geometría dada (por ejemplo, un polígono de una zona de estudio):</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="n">id_raster</span><span class="p">,</span><span class="w"> </span><span class="n">raster</span>
<span class="w">    </span><span class="k">FROM</span><span class="w"> </span><span class="n">capa_raster</span>
<span class="w">    </span><span class="k">WHERE</span><span class="w"> </span><span class="n">ST_Intersects</span><span class="p">(</span><span class="n">raster</span><span class="p">,</span><span class="w"> </span><span class="n">ST_GeomFromText</span><span class="p">(</span><span class="s1">&#39;POLÍGONO((...))&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">4326</span><span class="p">));</span>
</pre></div>
</div>
<p>La función ST_SummaryStats calcula estadísticas básicas (mínimo, máximo, media, etc.) para los valores del ráster dentro de un área específica:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="n">ST_SummaryStats</span><span class="p">(</span><span class="n">raster</span><span class="p">)</span>
<span class="w">    </span><span class="k">FROM</span><span class="w"> </span><span class="n">capa_raster</span>
<span class="w">    </span><span class="k">WHERE</span><span class="w"> </span><span class="n">ST_Intersects</span><span class="p">(</span><span class="n">raster</span><span class="p">,</span><span class="w"> </span><span class="n">ST_GeomFromText</span><span class="p">(</span><span class="s1">&#39;POLÍGONO((...))&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">4326</span><span class="p">));</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="integracion-postgis-python">
<h2>Integración PostGIS / Python<a class="headerlink" href="#integracion-postgis-python" title="Link to this heading">#</a></h2>
<p>En esta sección se muestra cómo cargar información espacial desde un archivo Shapefile (.shp) a una base de datos PostGIS utilizando dos enfoques:</p>
<ol class="arabic simple">
<li><p>Usando <code class="docutils literal notranslate"><span class="pre">psycopg2</span></code> (conexión directa SQL)</p></li>
</ol>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># GeoPandas: Extensión de Pandas para manejar datos geoespaciales (puntos, líneas, polígonos).</span>
<span class="c1"># Permite leer, escribir y analizar datos espaciales en formatos como Shapefile, GeoJSON, etc.</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">geopandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">gpd</span>
<span class="c1"># Psycopg2: Biblioteca para conectar Python con bases de datos PostgreSQL.</span>
<span class="c1"># Se usa para ejecutar consultas SQL, manejar transacciones y trabajar con datos espaciales en PostGIS.</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">psycopg2</span>
<span class="c1"># Shapely: Biblioteca para la manipulación y análisis de geometrías espaciales.</span>
<span class="c1"># &#39;wkt&#39; (Well-Known Text) permite convertir entre texto y objetos geométricos.</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">shapely</span><span class="w"> </span><span class="kn">import</span> <span class="n">wkt</span>
</pre></div>
</div>
</div>
</div>
<p>Leer los datos espaciales con ayuda de Geopandas</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">shapefile_path</span> <span class="o">=</span> <span class="s2">&quot;./Samples/Samples_Point.shp&quot;</span>      <span class="c1"># Ruta del archivo .shp con datos geoespaciales (Cambiar según sea necesario)</span>
<span class="n">gdf</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">shapefile_path</span><span class="p">)</span>                 <span class="c1"># Cargar el archivo en un GeoDataFrame</span>
<span class="n">gdf</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>                                          <span class="c1"># Mostrar las primeras filas del GeoDataFrame para inspección</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Shape_Leng</th>
      <th>Shape_Area</th>
      <th>class</th>
      <th>ORIG_FID</th>
      <th>geometry</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>Bosque</td>
      <td>0</td>
      <td>POINT (333600.852 710803.978)</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>Bosque</td>
      <td>0</td>
      <td>POINT (333797.268 710693.129)</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>Bosque</td>
      <td>0</td>
      <td>POINT (333865.332 710844.816)</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>Bosque</td>
      <td>0</td>
      <td>POINT (334120.089 710615.341)</td>
    </tr>
    <tr>
      <th>4</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>Bosque</td>
      <td>0</td>
      <td>POINT (334166.762 710842.872)</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>📌 Nota: Los nombres de las columnas pueden variar dependiendo del archivo .shp que estés utilizando.
Verifica las columnas disponibles usando gdf.columns y ajusta el código en consecuencia (por ejemplo: class, geometry, etc.).</p>
<p>📌 Nota: Este método es ideal para volúmenes pequeños o cuando se trabaja con scripts personalizados.
Para cargas masivas desde archivos Shapefile o GeoJSON, es preferible utilizar herramientas como shp2pgsql.</p>
<p>Crear la conexión con la base de datos espacial</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">DB_CONFIG</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;dbname&quot;</span><span class="p">:</span> <span class="s2">&quot;postgis_34_sample&quot;</span><span class="p">,</span>      <span class="c1"># Nombre de la base de datos</span>
    <span class="s2">&quot;user&quot;</span><span class="p">:</span> <span class="s2">&quot;postgres&quot;</span><span class="p">,</span>                 <span class="c1"># Usuario de la base de datos</span>
    <span class="s2">&quot;password&quot;</span><span class="p">:</span> <span class="s2">&quot;postgres&quot;</span><span class="p">,</span>             <span class="c1"># Contraseña del usuario</span>
    <span class="s2">&quot;host&quot;</span><span class="p">:</span> <span class="s2">&quot;localhost&quot;</span><span class="p">,</span>                <span class="c1"># Dirección del servidor (localhost si es local)</span>
    <span class="s2">&quot;port&quot;</span><span class="p">:</span> <span class="s2">&quot;5432&quot;</span>                      <span class="c1"># Puerto predeterminado de PostgreSQL</span>
<span class="p">}</span>
<span class="n">conn</span> <span class="o">=</span> <span class="n">psycopg2</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="o">**</span><span class="n">DB_CONFIG</span><span class="p">)</span>    <span class="c1"># Establecer conexión con la base de datos PostgreSQL</span>
<span class="n">cur</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>                     <span class="c1"># Crear un cursor para ejecutar comandos SQL</span>
</pre></div>
</div>
</div>
</div>
<p>Creación de tabla con columnas a cargar</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Crear una tabla en PostGIS si no existe</span>
<span class="n">create_table_query</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">CREATE TABLE IF NOT EXISTS training_sample (</span>
<span class="s2">    id SERIAL PRIMARY KEY,              -- Identificador único autoincremental</span>
<span class="s2">    class TEXT,                         -- Columna para almacenar la clase del punto</span>
<span class="s2">    geom GEOMETRY(Geometry, 32619)      -- Columna geométrica con proyección EPSG:32619 (UTM Zona 19N)</span>
<span class="s2">);</span>
<span class="s2">&quot;&quot;&quot;</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">create_table_query</span><span class="p">)</span>     <span class="c1"># Ejecutar la consulta SQL para crear la tabla</span>
<span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>                       <span class="c1"># Confirmar la creación de la tabla en la base de datos</span>
</pre></div>
</div>
</div>
</div>
<a class="reference internal image-reference" href="../../_images/Table_Training_Sample1.PNG"><img alt="unidad" class="align-center" src="../../_images/Table_Training_Sample1.PNG" style="width: 200px;" />
</a>
<p style="text-align: center; font-size: 12px;"> 
<strong>Fig. 6. Tabla creada "training_sample" en base de datos </strong>
</p><p>Insertar los datos</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">conn</span><span class="o">.</span><span class="n">rollback</span><span class="p">()</span>  <span class="c1"># Realizar un rollback por seguridad antes de insertar datos (opcional)</span>
<span class="n">insert_query</span> <span class="o">=</span> <span class="s2">&quot;INSERT INTO training_sample (class, geom) VALUES (</span><span class="si">%s</span><span class="s2">, ST_GeomFromText(</span><span class="si">%s</span><span class="s2">, 32619))&quot;</span>
<span class="c1"># Iterar sobre cada fila del GeoDataFrame y cargar los datos en la base de datos</span>
<span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">gdf</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
    <span class="n">class_</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;class&quot;</span><span class="p">]</span>                       <span class="c1"># Extraer el valor de la columna &#39;class&#39; (ajustar según los nombres de columnas)</span>
    <span class="n">geom</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;geometry&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">wkt</span>                  <span class="c1"># Convertir la geometría a formato WKT (Well-Known Text)    </span>
    <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">insert_query</span><span class="p">,</span> <span class="p">(</span><span class="n">class_</span><span class="p">,</span> <span class="n">geom</span><span class="p">))</span>   <span class="c1"># Ejecutar la consulta SQL con los valores extraídos</span>
<span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>                                   <span class="c1"># Confirmar la inserción de datos en la base de datos</span>
<span class="n">cur</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>                                     <span class="c1"># Cerrar el cursor y la conexión con la base de datos</span>
<span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<ol class="arabic simple" start="2">
<li><p>Usando <code class="docutils literal notranslate"><span class="pre">SQLAlchemy</span></code> (ORM con integración SQL expresiva)</p></li>
</ol>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">geopandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">gpd</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">shapely</span><span class="w"> </span><span class="kn">import</span> <span class="n">wkt</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy</span><span class="w"> </span><span class="kn">import</span> <span class="n">create_engine</span><span class="p">,</span> <span class="n">Column</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">String</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy.ext.declarative</span><span class="w"> </span><span class="kn">import</span> <span class="n">declarative_base</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy.orm</span><span class="w"> </span><span class="kn">import</span> <span class="n">sessionmaker</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">geoalchemy2</span><span class="w"> </span><span class="kn">import</span> <span class="n">Geometry</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">shapefile_path</span> <span class="o">=</span> <span class="s2">&quot;./Samples/Samples_Point.shp&quot;</span>                                  <span class="c1"># Ruta del archivo .shp con datos geoespaciales (Cambiar según sea necesario)</span>
<span class="n">gdf</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">shapefile_path</span><span class="p">)</span>                                             <span class="c1"># Cargar el archivo en un GeoDataFrame       </span>
<span class="n">DB_URL</span> <span class="o">=</span> <span class="s2">&quot;postgresql://postgres:postgres@localhost:5432/postgis_34_sample&quot;</span>      <span class="c1"># Crear conexión con SQLAlchemy</span>
<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="n">DB_URL</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">Base</span> <span class="o">=</span> <span class="n">declarative_base</span><span class="p">()</span>                                                       <span class="c1"># Crear una clase base para definir el modelo de la tabla       </span>
<span class="k">class</span><span class="w"> </span><span class="nc">TrainingSample</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&#39;training_sample_sqlalchemy&#39;</span>                                <span class="c1"># Nombre de la tabla en la base de datos</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">autoincrement</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>              <span class="c1"># id SERIAL PRIMARY KEY </span>
    <span class="n">class_</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span> <span class="n">String</span><span class="p">)</span>                                            <span class="c1"># class TEXT - Nota: &#39;class&#39; es palabra reservada en Python, por eso usamos &#39;class_&#39;</span>
    <span class="n">geom</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Geometry</span><span class="p">(</span><span class="n">geometry_type</span> <span class="o">=</span> <span class="s1">&#39;POINT&#39;</span><span class="p">,</span> <span class="n">srid</span> <span class="o">=</span> <span class="mi">32619</span><span class="p">))</span>              <span class="c1"># geom GEOMETRY(Geometry, 32619) - EPSG:32619 = UTM zona 19N</span>
<span class="n">Base</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">create_all</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span>                                                <span class="c1"># Crear la tabla en la base de datos si no existe</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">Session</span> <span class="o">=</span> <span class="n">sessionmaker</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span>         <span class="c1"># Crear una clase de sesión para interactuar con la base de datos</span>
<span class="n">session</span> <span class="o">=</span> <span class="n">Session</span><span class="p">()</span>
<span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">gdf</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
    <span class="n">muestra</span> <span class="o">=</span> <span class="n">TrainingSample</span><span class="p">(</span>
        <span class="n">class_</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;class&quot;</span><span class="p">],</span>
        <span class="n">geom</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;geometry&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">wkt</span>          <span class="c1"># GeoAlchemy acepta geometría como WKT o WKB</span>
    <span class="p">)</span>
    <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">muestra</span><span class="p">)</span>
<span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>                            <span class="c1"># Confirmar la inserción de datos en la base de datos</span>
<span class="n">session</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>                             <span class="c1"># Cerrar la sesión</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="comparacion-entre-psycopg2-y-sqlalchemy-para-la-carga-de-datos-espaciales">
<h2>Comparación entre <code class="docutils literal notranslate"><span class="pre">psycopg2</span></code> y <code class="docutils literal notranslate"><span class="pre">SQLAlchemy</span></code> para la carga de datos espaciales<a class="headerlink" href="#comparacion-entre-psycopg2-y-sqlalchemy-para-la-carga-de-datos-espaciales" title="Link to this heading">#</a></h2>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Aspecto</p></th>
<th class="head"><p><code class="docutils literal notranslate"><span class="pre">psycopg2</span></code> (consulta SQL directa)</p></th>
<th class="head"><p><code class="docutils literal notranslate"><span class="pre">SQLAlchemy</span></code> + <code class="docutils literal notranslate"><span class="pre">GeoAlchemy2</span></code> (ORM)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Inserción de datos</p></td>
<td><p>Manual, con sentencias <code class="docutils literal notranslate"><span class="pre">INSERT</span></code> en SQL</p></td>
<td><p>Basada en clases Python (<code class="docutils literal notranslate"><span class="pre">add</span></code>, <code class="docutils literal notranslate"><span class="pre">commit</span></code>)</p></td>
</tr>
<tr class="row-odd"><td><p>Mantenimiento del código</p></td>
<td><p>Mayor cantidad de código, menos legible</p></td>
<td><p>Más limpio, estructurado y fácil de mantener</p></td>
</tr>
<tr class="row-even"><td><p>Validación del esquema</p></td>
<td><p>Depende del control manual con SQL</p></td>
<td><p>Definido por clases y validado automáticamente</p></td>
</tr>
<tr class="row-odd"><td><p>Conversión de geometría</p></td>
<td><p>Requiere <code class="docutils literal notranslate"><span class="pre">ST_GeomFromText(...)</span></code></p></td>
<td><p>Se puede insertar directamente como <code class="docutils literal notranslate"><span class="pre">WKT</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Creación de la tabla</p></td>
<td><p>Manual con SQL (<code class="docutils literal notranslate"><span class="pre">CREATE</span> <span class="pre">TABLE</span></code>)</p></td>
<td><p>Automática con <code class="docutils literal notranslate"><span class="pre">Base.metadata.create_all()</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Escalabilidad del proyecto</p></td>
<td><p>Adecuado para scripts simples o rápidos</p></td>
<td><p>Ideal para aplicaciones más grandes y robustas</p></td>
</tr>
<tr class="row-even"><td><p>Lectura del modelo</p></td>
<td><p>Menos intuitiva (estructura definida en SQL)</p></td>
<td><p>Más clara: el modelo es una clase con atributos</p></td>
</tr>
</tbody>
</table>
</div>
<ul class="simple">
<li><p>Cargar datos desde archivo .tif con librerías de python <code class="docutils literal notranslate"><span class="pre">subprocess</span></code> y <code class="docutils literal notranslate"><span class="pre">psycopg2</span></code></p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">psycopg2</span>     <span class="c1"># psycopg2: Librería para conectar Python con bases de datos PostgreSQL. Permite ejecutar consultas SQL, manipular datos y gestionar transacciones.</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">subprocess</span>   <span class="c1"># subprocess: Módulo para ejecutar comandos del sistema desde Python. Se usa para llamar programas externos como psql, raster2pgsql, etc.</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">DB_CONFIG</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;dbname&quot;</span><span class="p">:</span> <span class="s2">&quot;postgis_34_sample&quot;</span><span class="p">,</span>      <span class="c1"># Nombre de la base de datos</span>
    <span class="s2">&quot;user&quot;</span><span class="p">:</span> <span class="s2">&quot;postgres&quot;</span><span class="p">,</span>                 <span class="c1"># Usuario de la base de datos</span>
    <span class="s2">&quot;password&quot;</span><span class="p">:</span> <span class="s2">&quot;postgres&quot;</span><span class="p">,</span>             <span class="c1"># Contraseña del usuario</span>
    <span class="s2">&quot;host&quot;</span><span class="p">:</span> <span class="s2">&quot;localhost&quot;</span><span class="p">,</span>                <span class="c1"># Dirección del servidor (localhost si es local)</span>
    <span class="s2">&quot;port&quot;</span><span class="p">:</span> <span class="s2">&quot;5432&quot;</span>                      <span class="c1"># Puerto predeterminado de PostgreSQL</span>
<span class="p">}</span>
<span class="n">conn</span> <span class="o">=</span> <span class="n">psycopg2</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="o">**</span><span class="n">DB_CONFIG</span><span class="p">)</span> 
<span class="n">cur</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
<span class="c1"># Abrir el archivo raster (.tif)</span>
<span class="n">notebook_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>                                                  <span class="c1"># Ruta donde se ejecuta el notebook</span>
<span class="n">raster_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">notebook_dir</span><span class="p">,</span> <span class="s2">&quot;Image_raster&quot;</span><span class="p">,</span> <span class="s2">&quot;temp_raster.tif&quot;</span><span class="p">)</span> <span class="c1"># Ruta del archivo .tif  (Cambiar según sea necesario)</span>
<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;PGPASSWORD&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">DB_CONFIG</span><span class="p">[</span><span class="s2">&quot;password&quot;</span><span class="p">]</span>
<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">¿Por qué usar PGPASSWORD?</span>
<span class="sd">- Evita que psql solicite la contraseña cada vez que se ejecuta un comando.</span>
<span class="sd">- Facilita la automatización de tareas en PostgreSQL, como importar datos o ejecutar scripts SQL.</span>
<span class="sd">- Es más seguro que escribir la contraseña directamente en el comando, pero aún es recomendable eliminarla después de su uso.&#39;</span>
<span class="sd">&#39;&#39;&#39;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&quot;\n¿Por qué usar PGPASSWORD?\n- Evita que psql solicite la contraseña cada vez que se ejecuta un comando.\n- Facilita la automatización de tareas en PostgreSQL, como importar datos o ejecutar scripts SQL.\n- Es más seguro que escribir la contraseña directamente en el comando, pero aún es recomendable eliminarla después de su uso.&#39;\n&quot;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Ruta a la carpeta donde están raster2pgsql y psql</span>
<span class="n">pg_bin_path</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;C:\Program Files\PostgreSQL\16\bin&quot;</span>         <span class="c1"># Cambiar según la instalación de PostgreSQL</span>
<span class="n">sql_output_path</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;C:\Shp_Example\prueba.sql&quot;</span>              <span class="c1"># Ruta de salida para el archivo SQL (Cambiar según sea necesario)</span>
<span class="c1"># Construir el comando con la ruta completa de raster2pgsql y psql</span>
<span class="n">cmd</span> <span class="o">=</span> <span class="sa">fr</span><span class="s1">&#39;&quot;</span><span class="si">{</span><span class="n">pg_bin_path</span><span class="si">}</span><span class="s1">\raster2pgsql.exe&quot; -s 32619 -I -C &quot;</span><span class="si">{</span><span class="n">raster_path</span><span class="si">}</span><span class="s1">&quot; &gt;  </span><span class="si">{</span><span class="n">sql_output_path</span><span class="si">}</span><span class="s1">&#39;</span>
<span class="c1"># Ejecutar el comando en la terminal</span>
<span class="n">process</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span> <span class="n">shell</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">capture_output</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cmd</span> <span class="o">=</span> <span class="sa">fr</span><span class="s1">&#39;&quot;</span><span class="si">{</span><span class="n">pg_bin_path</span><span class="si">}</span><span class="s1">\psql.exe&quot; -d </span><span class="si">{</span><span class="n">DB_CONFIG</span><span class="p">[</span><span class="s2">&quot;dbname&quot;</span><span class="p">]</span><span class="si">}</span><span class="s1"> -U </span><span class="si">{</span><span class="n">DB_CONFIG</span><span class="p">[</span><span class="s2">&quot;user&quot;</span><span class="p">]</span><span class="si">}</span><span class="s1"> -h </span><span class="si">{</span><span class="n">DB_CONFIG</span><span class="p">[</span><span class="s2">&quot;host&quot;</span><span class="p">]</span><span class="si">}</span><span class="s1"> -p </span><span class="si">{</span><span class="n">DB_CONFIG</span><span class="p">[</span><span class="s2">&quot;port&quot;</span><span class="p">]</span><span class="si">}</span><span class="s1"> -f &quot;</span><span class="si">{</span><span class="n">sql_output_path</span><span class="si">}</span><span class="s1">&quot;&#39;</span>
<span class="c1"># Ejecutar el comando</span>
<span class="n">process</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span> <span class="n">shell</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">capture_output</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="c1"># Limpiar la variable de entorno después de ejecutar el comando</span>
<span class="k">del</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;PGPASSWORD&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>Resultado del cargue del archivo raster</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">process</span><span class="o">.</span><span class="n">stdout</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>BEGIN
CREATE TABLE
INSERT 0 1
CREATE INDEX
ANALYZE
 addrasterconstraints 
----------------------
 t
(1 fila)

COMMIT
</pre></div>
</div>
</div>
</div>
<div class="important admonition">
<p class="admonition-title">Actividad</p>
<ul class="simple">
<li><p><strong>Este recuadro está destinado a preguntas y actividades para los estudiantes.</strong></p></li>
</ul>
<p>🔍 <strong>Reto 1: Consulta espacial con condiciones múltiples</strong></p>
<p>Usando la tabla <code class="docutils literal notranslate"><span class="pre">clima</span></code> en PostgreSQL/PostGIS, crea una consulta que devuelva:</p>
<ul class="simple">
<li><p>Las ciudades donde la temperatura mínima fue inferior a 10 °C</p></li>
<li><p>Y donde hubo alguna precipitación (<code class="docutils literal notranslate"><span class="pre">precipitacion</span> <span class="pre">&gt;</span> <span class="pre">0</span></code>)</p></li>
</ul>
<p>🧭 <strong>Reto 2: Reflexión — ¿Vector o ráster?</strong></p>
<p>Reflexiona y responde:</p>
<ul class="simple">
<li><p>¿Qué ventajas ofrece el modelo ráster frente al vectorial en análisis de cobertura del suelo?</p></li>
<li><p>¿Cuándo conviene usar uno u otro?</p></li>
</ul>
<p>Justifica tu respuesta con base en los ejercicios desarrollados en esta guía.</p>
<p>⚙️ <strong>Reto 3: Automatiza tu propio cargue vectorial</strong></p>
<p>Desarrolla un script en Python que:</p>
<ol class="arabic simple">
<li><p>Lea un archivo Shapefile proporcionado por el usuario</p></li>
<li><p>Detecte automáticamente las columnas del archivo</p></li>
<li><p>Cree una tabla correspondiente en PostGIS</p></li>
<li><p>Inserte todos los datos usando <code class="docutils literal notranslate"><span class="pre">GeoAlchemy2</span></code></p></li>
</ol>
<blockquote>
<div><p>💡 Tip: Usa <code class="docutils literal notranslate"><span class="pre">gdf.columns</span></code> para explorar la estructura del archivo.</p>
</div></blockquote>
<p>🌱 <strong>Reto 4: Interpretación de datos ráster</strong></p>
<p>Usando una imagen <code class="docutils literal notranslate"><span class="pre">.tif</span></code> previamente cargada en PostGIS:</p>
<ul class="simple">
<li><p>Calcula el valor mínimo, máximo y promedio dentro de un polígono definido</p></li>
<li><p>Interpreta qué podrían representar estos valores en el contexto de cobertura vegetal o uso del suelo</p></li>
</ul>
<p>Realiza la consulta utilizando <code class="docutils literal notranslate"><span class="pre">ST_SummaryStats</span></code> desde Python con <code class="docutils literal notranslate"><span class="pre">psycopg2</span></code>.</p>
</div>
</section>
<section id="referencias-y-recursos">
<h2>Referencias y Recursos<a class="headerlink" href="#referencias-y-recursos" title="Link to this heading">#</a></h2>
<section id="bases-de-datos-y-sql">
<h3>🗃️ Bases de datos y SQL<a class="headerlink" href="#bases-de-datos-y-sql" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><a class="reference external" href="https://www.oracle.com/co/database/what-is-database/">¿Qué es una base de datos? — Oracle</a></p></li>
<li><p><a class="reference external" href="https://www.postgresql.org/docs/current/intro-whatis.html">Introducción a PostgreSQL</a></p></li>
<li><p><a class="reference external" href="https://www.postgresql.org/docs/current/">Documentación oficial de PostgreSQL</a></p></li>
<li><p><a class="reference external" href="https://www.postgresql.org/docs/current/sql.html">Lenguaje SQL en PostgreSQL — Comandos y estructura</a></p></li>
</ul>
</section>
<hr class="docutils" />
<section id="postgis-y-funciones-espaciales">
<h3>🌐 PostGIS y funciones espaciales<a class="headerlink" href="#postgis-y-funciones-espaciales" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><a class="reference external" href="https://postgis.net/">Sitio oficial de PostGIS</a></p></li>
<li><p><a class="reference external" href="https://postgis.net/docs/manual-1.5/ch08.html">Funciones espaciales en PostGIS — Manual 1.5 (imagen usada)</a></p></li>
<li><p><a class="reference external" href="https://postgis.net/docs/manual-3.5/using_postgis_dbmanagement.html#loading-data">Carga de datos vectoriales en PostGIS</a></p></li>
<li><p><a class="reference external" href="https://postgis.net/docs/using_raster_dataman">Manejo de datos ráster en PostGIS</a></p></li>
</ul>
</section>
<hr class="docutils" />
<section id="python-postgresql-postgis">
<h3>🐍 Python + PostgreSQL/PostGIS<a class="headerlink" href="#python-postgresql-postgis" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><a class="reference external" href="https://geopandas.org/en/stable/">GeoPandas — Documentación oficial</a></p></li>
<li><p><a class="reference external" href="https://shapely.readthedocs.io/en/stable/">Shapely — Documentación oficial</a></p></li>
<li><p><a class="reference external" href="https://www.psycopg.org/docs/">Psycopg2 — PostgreSQL adapter para Python</a></p></li>
<li><p><a class="reference external" href="https://docs.sqlalchemy.org/en/20/">SQLAlchemy — Documentación oficial</a></p></li>
<li><p><a class="reference external" href="https://geoalchemy-2.readthedocs.io/en/latest/">GeoAlchemy2 — Extensión espacial para SQLAlchemy</a></p></li>
</ul>
</section>
<hr class="docutils" />
<section id="herramientas-y-entornos-de-desarrollo">
<h3>💻 Herramientas y entornos de desarrollo<a class="headerlink" href="#herramientas-y-entornos-de-desarrollo" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><a class="reference external" href="https://jupyterbook.org/en/stable/">JupyterBook — Documentación oficial</a></p></li>
<li><p><a class="reference external" href="https://jupyter.org/">Jupyter Notebook — Sitio oficial</a></p></li>
<li><p><a class="reference external" href="https://marketplace.visualstudio.com/items?itemName=ms-python.python">Extensión oficial de Python para VS Code</a></p></li>
</ul>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./modulo_introduction_postgis\1742549645_plantillanb"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="../../modulo_0/1739882476_plantillanb/1739882476_plantillanb.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Introducción a las principales librerías: NumPy, Pandas, rasterio, GDAL y geopandas</p>
      </div>
    </a>
    <a class="right-next"
       href="../../modulo_example_postgis/1742549645_plantillanb/1742343747_plantillanb.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Bases de datos espaciales: PostGIS y su integración con Python (Ejemplo de uso)</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#definiciones-preliminares">Definiciones preliminares</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#el-lenguaje-sql">El lenguaje SQL</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crear-y-eliminar-tablas">Crear y eliminar tablas</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#insercion-de-datos">- Inserción de datos</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#consultas-basicas-con-select">- Consultas básicas con <code class="docutils literal notranslate"><span class="pre">SELECT</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#eliminacion-de-duplicados-con-distinct">- Eliminación de duplicados con <code class="docutils literal notranslate"><span class="pre">DISTINCT</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#uso-de-join-para-combinar-tablas">- Uso de <code class="docutils literal notranslate"><span class="pre">JOIN</span></code> para combinar tablas</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#subconsultas">- Subconsultas</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#uso-de-group-by-y-having">- Uso de <code class="docutils literal notranslate"><span class="pre">GROUP</span> <span class="pre">BY</span></code> y <code class="docutils literal notranslate"><span class="pre">HAVING</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#actualizacion-y-eliminacion-de-datos">- Actualización y eliminación de datos</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#eliminar-registros">- Eliminar registros</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#vistas">- Vistas</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#llaves-foraneas">- Llaves foráneas</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#transacciones">- Transacciones</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#postgresql">PostgreSQL</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#postgis">PostGIS</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#administracion-postgis">Administración PostGIS</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#modelo-de-datos-espacial">Modelo de datos espacial</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#tipos-de-datos-geograficos">Tipos de datos geográficos</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#calculo-de-atributos-geometricos">Cálculo de atributos geométricos</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#sistemas-de-referencia-espacial">Sistemas de referencia espacial</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#cargar-datos-espaciales-utilizando-sql">Cargar datos espaciales utilizando SQL</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#datos-vectoriales">- Datos vectoriales</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#utilizando-el-shapefile-loader">Utilizando el Shapefile Loader</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#extrayendo-datos-espaciales-vectoriales">Extrayendo datos espaciales vectoriales</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#datos-raster">- Datos raster</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#utilizando-el-rasters-loader">Utilizando el Rasters Loader</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#extrayendo-datos-espaciales-raster">Extrayendo datos espaciales ráster</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#obtener-metadatos-del-raster">Obtener metadatos del ráster</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#integracion-postgis-python">Integración PostGIS / Python</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#comparacion-entre-psycopg2-y-sqlalchemy-para-la-carga-de-datos-espaciales">Comparación entre <code class="docutils literal notranslate"><span class="pre">psycopg2</span></code> y <code class="docutils literal notranslate"><span class="pre">SQLAlchemy</span></code> para la carga de datos espaciales</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#referencias-y-recursos">Referencias y Recursos</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bases-de-datos-y-sql">🗃️ Bases de datos y SQL</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#postgis-y-funciones-espaciales">🌐 PostGIS y funciones espaciales</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#python-postgresql-postgis">🐍 Python + PostgreSQL/PostGIS</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#herramientas-y-entornos-de-desarrollo">💻 Herramientas y entornos de desarrollo</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Instituto Geográfico Agustín Codazzi
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>